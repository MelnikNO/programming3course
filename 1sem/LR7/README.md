# counter-deploy
–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –¥–µ–ø–ª–æ—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ7

–ó–∞–¥–∞–Ω–∏–µ 

1. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å / –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–µ –≤ [—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏](https://github.com/nzhukov/counter-deploy) –ª–æ–∫–∞–ª—å–Ω–æ –∏ —Å–æ–∑–¥–∞—Ç—å –æ—Ç—á–µ—Ç –æ –µ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ.
2. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å / –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ play with docker ([https://labs.play-with-docker.com/](https://labs.play-with-docker.com/)).
3. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å / –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–Ω–æ –Ω–∞ –º–∞—à–∏–Ω–µ, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–º —Å —É—á–µ—Ç–æ–º —Å–µ—Ç–µ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏ –∫–∞—Ç–∞–ª–æ–≥–∞, –∫—É–¥–∞ –±—É–¥–µ—Ç –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.  –£—á–µ—Å—Ç—å, —á—Ç–æ –Ω–∞ —ç—Ç–æ—Ç —Å–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω –¥–µ–ø–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –≥—Ä—É–ø–ø—ã, —Ç.–µ. –Ω–∞–¥–æ –º–µ–Ω—è—Ç—å –ø–æ—Ä—Ç—ã, –ø–∞–ø–∫—É –¥–ª—è –¥–µ–ø–ª–æ—è –∏ –¥—Ä—É–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç–ª–∏—á–Ω—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ (—á—Ç–æ–±—ã –Ω–µ –º–µ—à–∞—Ç—å –¥—Ä—É–≥ –¥—Ä—É–≥—É).
4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –ª–æ–≥–∏–∫–∏ –∏ –¥–µ–ø–ª–æ–π Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º CI. 


–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ:

1. –°—á—ë—Ç—á–∏–∫ **–Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–Ω—å—à–µ 0**

2. –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —É–º–µ–Ω—å—à–∏—Ç—å —Å—á—ë—Ç—á–∏–∫, –µ—Å–ª–∏ –æ–Ω —Ä–∞–≤–µ–Ω 0:

- —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTTP 400

- –≤ –æ—Ç–≤–µ—Ç–µ JSON —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ–± –æ—à–∏–±–∫–µ

–ü—Ä–∏–º–µ—Ä:

```
{
  "error": "Counter cannot be negative"
}
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è —á–∞—Å—Ç—å)

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å **–º–∏–Ω–∏–º—É–º 3 —Ç–µ—Å—Ç–∞** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º ```pytest```:

1. **–¢–µ—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏**

- –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–∞ —Ä–∞–≤–Ω–æ 0

2. **–¢–µ—Å—Ç —É–≤–µ–ª–∏—á–µ–Ω–∏—è**

- –ø–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ ```/increment``` –∑–Ω–∞—á–µ–Ω–∏–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ 1

3. **–¢–µ—Å—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π**

- –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —É–º–µ–Ω—å—à–∏—Ç—å —Å—á—ë—Ç—á–∏–∫ –Ω–∏–∂–µ 0 —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É

üìå Redis –º–æ–∂–Ω–æ:

- –ª–∏–±–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ;

- –ª–∏–±–æ –º–æ–∫–∞—Ç—å —á–µ—Ä–µ–∑ fakeredis (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏).

CI/CD –≤ GitHub Actions workflow –¥–æ–ª–∂–µ–Ω:

1. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º push –≤ main

2. –í—ã–ø–æ–ª–Ω—è—Ç—å:

- —É—Å—Ç–∞–Ω–æ–≤–∫—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

- –∑–∞–ø—É—Å–∫ pytest

3. **–ü—Ä–µ—Ä—ã–≤–∞—Ç—å –¥–µ–ø–ª–æ–π**, –µ—Å–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ç–µ—Å—Ç –Ω–µ –ø—Ä–æ—à—ë–ª

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —ç—Ç–∞–ø–æ–≤:

```checkout ‚Üí setup python ‚Üí install deps ‚Üí run tests ‚Üí deploy```


‚ö†Ô∏è –†–µ–∞–ª—å–Ω—ã–π –¥–µ–ø–ª–æ–π: sync –Ω–∞ —Å–µ—Ä–≤–µ—Ä. 

```
backend/
 ‚îú‚îÄ‚îÄ app.py
 ‚îú‚îÄ‚îÄ requirements.txt
 ‚îú‚îÄ‚îÄ tests/
 ‚îÇ    ‚îî‚îÄ‚îÄ test_counter.py
 ‚îî‚îÄ‚îÄ redis_client.py
.github/
 ‚îî‚îÄ‚îÄ workflows/
      ‚îî‚îÄ‚îÄ deploy.yml
```

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ —Å–≤–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (—Ñ–æ—Ä–∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è) —Å –¥–µ–º–æ –∏ –æ—Ç—á–µ—Ç–æ–º –ø–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é —Ä–∞–±–æ—Ç—ã. 

---

# –†–µ—à–µ–Ω–∏–µ

## 1

1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–ª–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –ó–∞–ø—É—Å—Ç–∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ

<img width="1812" height="569" alt="image" src="https://github.com/user-attachments/assets/1be58389-0454-4cae-9fe8-0e219f10e2e5" />

<img width="1200" height="191" alt="image" src="https://github.com/user-attachments/assets/e61bc747-1815-4285-9c43-677aec030540" />

<img width="1474" height="419" alt="image" src="https://github.com/user-attachments/assets/0866dcfe-e70b-4c6c-9a78-317809073682" />

## 2

–†–∞–∑–≤–µ—Ä–Ω—É–ª–∏ –∏ –∑–∞–ø—É—Å—Ç–∏–ª–∏ –Ω–∞ play with docker

<img width="1841" height="949" alt="image_2025-12-16_12-52-27" src="https://github.com/user-attachments/assets/17a562da-ec3a-4af4-a965-5ef79155ec6c" />

<img width="1326" height="420" alt="image_2025-12-16_12-53-12" src="https://github.com/user-attachments/assets/8fbaa77a-fa3f-499e-b466-1fb87fd9b2a2" />
